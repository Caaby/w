#!name=URL Rewrite
#!desc=URL Rewrite 重定向
#!MANAGED-CONFIG https://raw.githubusercontent.com/Caaby/w/main/surge/URLRewrite.sgmodule

// 该段定义针对 HTTP 请求的 URL 重定向规则
// 有两种重定向方式: "header" 和 "302"
// Surge 能重写请求头的域名，指向一个新的地址发送请求。发送请求的客户端不会发现这个操作。
// 不能使用 HTTPS Scheme 重定向。而且也不能重定向 HTTPS 请求。

[URL Rewrite]
# << Redirect Google search
^https?://(.*?[.])?(?:g|google).cn https://$1google.com 302
^https?://(.*?[.])?(?:g|google).com.hk https://$1google.com 302
# Redirect Google service
^https?://(www.)?google\.cn https://www.google.com 302
^https?://(www.)?g\.cn https://www.google.com 302

# << 此规则可以将 Wikipedia 的请求跳转至 Wikiwand 以达到 Wikipedia 排版优化的目的。重新排版后的语言将与原页面语言保持一致。
^https://zh.(m.)?wikipedia.org/(zh(-\w)?) http://www.wikiwand.com/$2 302
^https://(\w*).(m.)?wikipedia.org/wiki http://www.wikiwand.com/$1 302

# << 12306
^https?+:\/\/mobile\.12306\.cn\/otsmobile\/app\/mas\/loggw\/(logUpload.do|logConfig.do) - reject

[MITM]
hostname = %APPEND% *.google.cn, *.google.com.hk,mobile.12306.cn, *.wikipedia.org
