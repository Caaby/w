#!MANAGED-CONFIG https://raw.githubusercontent.com/caaby/w/surge/c.conf


# free订阅链接 - https://v2free.org/link/ighvqVWAeHYIKsMK?surge=4
# 官方手册 - https://manual.nssurge.com/
# 理解原理 - https://manual.nssurge.com/book/understanding-surge/cn/
# 帮助中心 - https://nssurge.zendesk.com/
# 技术社区 - https://community.nssurge.com

# Self-use sgmodule:

# Advanced Settings & URL Redirect - https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Module/General.sgmodule

# Block Advertising for Surge iOS - https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Module/Block/Advertising.sgmodule

# Block YouTube Advertising - https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Module/Block/YouTubeAds.sgmodule

# AllInOne - https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/Surge/AllInOne/AllInOne.sgmodule

# 复写去广告 - https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/Surge/Advertising/Advertising.sgmodule

# Turn Off Google Safesearch(Beta) - https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Module/Turn-Off-Google-Safesearch.sgmodule

# 解锁 Siri 建议与搜索 - https://raw.githubusercontent.com/VirgilClyne/iRingo/main/sgmodule/Siri_Suggestions_for_Proxy.sgmodule

# 美标天气AQI - https://raw.githubusercontent.com/VirgilClyne/iRingo/main/sgmodule/Apple_Weather.sgmodule

[General]
# >> GeoIP 数据库
geoip-maxmind-url = https://raw.githubusercontent.com/Dreamacro/maxmind-geoip/release/Country.mmdb

# >> 禁用GeoIP数据库自动更新, false为允许自动更新
disable-geoip-db-auto-update = false

[Proxy Group]
# >> 代理
𝗣𝗿𝗼𝘅𝘆 = select, 𝗛𝗼𝗻𝗴 𝗞𝗼𝗻𝗴, 𝗧𝗮𝗶𝘄𝗮𝗻, 𝗝𝗮𝗽𝗮𝗻, 𝗦𝗶𝗻𝗴𝗮𝗽𝗼𝗿𝗲,  𝗨𝗻𝗶𝘁𝗲𝗱 𝗦𝘁𝗮𝘁𝗲𝘀, VIP, FAST

# >> 最终的
𝗙𝗶𝗻𝗮𝗹 = select, 𝗣𝗿𝗼𝘅𝘆, DIRECT

# >> 𝗚𝗲𝗿𝗺𝗮𝗻𝘆 = fallback, policy-path=https://sub.store/download/collection/Dler-Nexitally, policy-regex-filter=德国, update-interval=43200, no-alert=0, hidden=1
# >> 𝗞𝗼𝗿𝗲𝗮 = fallback, policy-path=https://sub.store/download/collection/Dler-Nexitally, policy-regex-filter=韩国, update-interval=43200, no-alert=0, hidden=1

# >> +86，港，澳，台，手机号码绑定用户走Direct即可。Google Voice用户可根据你WeChat服务器所在的地区来选择不同的策略。
WeChat = select, 𝗛𝗼𝗻𝗴 𝗞𝗼𝗻𝗴, 𝗧𝗮𝗶𝘄𝗮𝗻, 𝗝𝗮𝗽𝗮𝗻, 𝗦𝗶𝗻𝗴𝗮𝗽𝗼𝗿𝗲, 𝗨𝗻𝗶𝘁𝗲𝗱 𝗦𝘁𝗮𝘁𝗲𝘀, DIRECT

# Telegram = select, 𝗛𝗼𝗻𝗴 𝗞𝗼𝗻𝗴, 𝗦𝗶𝗻𝗴𝗮𝗽𝗼𝗿𝗲, 𝗨𝗻𝗶𝘁𝗲𝗱 𝗦𝘁𝗮𝘁𝗲𝘀

𝗦𝘁𝗿𝗲𝗮𝗺 = select, 𝗛𝗼𝗻𝗴 𝗞𝗼𝗻𝗴, 𝗝𝗮𝗽𝗮𝗻, 𝗦𝗶𝗻𝗴𝗮𝗽𝗼𝗿𝗲, 𝗨𝗻𝗶𝘁𝗲𝗱 𝗦𝘁𝗮𝘁𝗲𝘀, 𝗧𝗮𝗶𝘄𝗮𝗻, VIP, FAST

𝗛𝗼𝗻𝗴 𝗞𝗼𝗻𝗴 = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, interval=500, tolerance=100, update-interval=43200, policy-regex-filter=(?=.*(港|菲|HK|(?i)Hong))^((?!(台|日|韩|新|美)).)*$, hidden=0

𝗧𝗮𝗶𝘄𝗮𝗻 = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, interval=500, tolerance=100, update-interval=43200, policy-regex-filter=(?=.*(台|TW|(?i)Taiwan))^((?!(港|日|韩|新|美)).)*$, hidden=0

𝗝𝗮𝗽𝗮𝗻 = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, interval=500, tolerance=100, update-interval=43200, policy-regex-filter=(?=.*(日|JP|(?i)Japan))^((?!(港|台|韩|新|美)).)*$, hidden=0

𝗦𝗶𝗻𝗴𝗮𝗽𝗼𝗿𝗲 = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, interval=500, tolerance=100, update-interval=43200, policy-regex-filter=(?=.*(新|狮|獅|SG|(?i)Singapore))^((?!(港|台|日|韩|美)).)*$, hidden=0

𝗨𝗻𝗶𝘁𝗲𝗱 𝗦𝘁𝗮𝘁𝗲𝘀 = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, interval=500, tolerance=100, update-interval=43200, policy-regex-filter=(?=.*(美|US|(?i)States|American))^((?!(港|台|日|韩|新)).)*$, hidden=0

𝗡𝗲𝘁𝗳𝗹𝗶𝘅 = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, interval=500, tolerance=100, update-interval=43200, policy-regex-filter=(奈飞|NF|NETFLIX), hidden=0

VIP = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, interval=500, tolerance=100, update-interval=43200, policy-regex-filter=VIP2, hidden=0

FAST = url-test, policy-path=https://cdn.v2free.net/link/ighvqVWAeHYIKsMK?list=surge, interval=500, tolerance=100, update-interval=43200, policy-regex-filter = ^((?!套餐|剩余).)*$, hidden=0

[Rule]

####### <REJECT 拒绝广告> #######

# >> Unbreak 后续规则修正
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list, DIRECT

# >> Advertising 广告
# >> RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Advertising.list, REJECT-TINYGIF
# >> DOMAIN-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/AdvertisingPlus.list, REJECT-TINYGIF
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising.list, REJECT-TINYGIF
DOMAIN-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising_Domain.list, REJECT-TINYGIF

# >> Privacy 隐私
# >> RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Privacy.list, REJECT-TINYGIF

# >> Hijacking 运营商劫持或恶意网站
#  >>RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Guard/Hijacking.list, REJECT-TINYGIF


####### <PROXY 规则代理> #######

# >> Apple 代理服务
RULE-SET, https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/AppleProxy/AppleProxy.list, 𝗣𝗿𝗼𝘅𝘆

# >> WeChat (此规则仅针对WeChat绑定Google Voice的用户。+86、港、澳、台用户可直接Direct。)
RULE-SET,https://cdn.jsdelivr.net/gh/NobyDa/Script/Surge/WeChat.list, WeChat

# >> 𝗦𝗽𝗼𝘁𝗶𝗳𝘆
# RULE-SET,https://cdn.jsdelivr.net/gh/DivineEngine/Profiles/Surge/Ruleset/StreamingMedia/Music/Spotify.list,𝗛𝗼𝗻𝗴 𝗞𝗼𝗻𝗴
RULE-SET,https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/Spotify/Spotify.list, 𝗛𝗼𝗻𝗴 𝗞𝗼𝗻𝗴

# >> 𝗡𝗲𝘁𝗳𝗹𝗶𝘅
RULE-SET,https://cdn.jsdelivr.net/gh/DivineEngine/Profiles/Surge/Ruleset/StreamingMedia/Video/Netflix.list, 𝗡𝗲𝘁𝗳𝗹𝗶𝘅

# >> 𝗗𝗶𝘀𝗻𝗲𝘆+
RULE-SET, https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/Disney/Disney.list, 𝗦𝘁𝗿𝗲𝗮𝗺

# >> YouTube
RULE-SET, https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/YouTube/YouTube.list, 𝗦𝘁𝗿𝗲𝗮𝗺

# >> Telegram服务
RULE-SET, https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/Telegram/Telegram.list, FAST

# >> github
RULE-SET, https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/GitHub/GitHub.list, 𝗣𝗿𝗼𝘅𝘆

# >> Google
RULE-SET, https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Google/Google.list, 𝗨𝗻𝗶𝘁𝗲𝗱 𝗦𝘁𝗮𝘁𝗲𝘀

# >> 国际流媒体服务
RULE-SET, https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/GlobalMedia/GlobalMedia.list, 𝗦𝘁𝗿𝗲𝗮𝗺

# >> 全球加速
RULE-SET, https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list, 𝗣𝗿𝗼𝘅𝘆


####### <DIRECT 中国直连> #######
# >> Client(仅 macOS)
PROCESS-NAME, UUBooster, DIRECT

# > Download (仅 macOS)
PROCESS-NAME, aria2c, DIRECT
PROCESS-NAME, fdm, DIRECT
PROCESS-NAME, Folx, DIRECT
PROCESS-NAME, NetTransport, DIRECT
PROCESS-NAME, Thunder, DIRECT
PROCESS-NAME, Transmission, DIRECT
PROCESS-NAME, uTorrent, DIRECT
PROCESS-NAME, WebTorrent, DIRECT
PROCESS-NAME, WebTorrent Helper, DIRECT

# >> Apple 国内服务
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Apple/Apple.list, DIRECT

# >> China 中国直连
RULE-SET,https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/China.list, DIRECT
RULE-SET, https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script/rule/Surge/ChinaIPs/ChinaIPs.list, DIRECT

# >> Local Area Network 局域网
RULE-SET, LAN, DIRECT

# >> 当本地dns服务器解析出的ip为中国 ip时，直接使用该结果，不在用远程dns服务器重新解析
GEOIP, CN, DIRECT

# >> 当本地dns服务器解析出的ip时，使用代理向远程dns服务器重新解析域名
GEOIP, US, 𝗨𝗻𝗶𝘁𝗲𝗱 𝗦𝘁𝗮𝘁𝗲𝘀

FINAL, 𝗙𝗶𝗻𝗮𝗹, dns-failed

[MITM]
skip-server-cert-verify = true
ca-passphrase = D7004A35
ca-p12 = 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
